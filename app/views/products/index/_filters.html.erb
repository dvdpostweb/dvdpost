<div id="filters">
  <h3>
    <%= t '.refine' %>
  </h3>
  <fieldset>
    <ul>
      <li class="technology<%= ' open' if filter.media? %>">
        <%= link_to t('.tech') %>
        <div>
          <% medias = current_customer.address.belgian? ? [:dvd, :bluray, :streaming] : [:dvd, :bluray] %>
          <% medias.each do |media| %>
            <label>
              <%= filter_checkbox_tag :media, media, (filter.media? && filter.media.include?(media)) %>
              <%= t ".#{media}" %>
            </label>
          <% end %>
        </div>
      </li>
      <li class="audience<%= ' open' if filter.audience? %>">
        <%= link_to t('.public') %>
        <div id="audience-slider">
          <%= f.hidden_field :audience_min, :value => filter.audience_min || 0 %>
          <%= f.hidden_field :audience_max, :value => filter.audience_max || 18 %>
          <ul id="audience_labels">
            <% ['ALL', '-10', '-12', '-16', '-18'].collect do |p| %>
              <li><%= p %></li>
            <% end %>
          </ul>
          <div id="audience-slider-range"></div>
        </div>
      </li>
      <li class="country<%= ' open' if filter.country_id? %>">
        <%= link_to t('.countries') %>
        <div>
          <%= f.select :country_id, countries.collect{|country| [country.name, country.id]}, {:include_blank => true} %>
        </div>
      </li>
      <li class="year<%= ' open' if filter.year? %>">
        <%= link_to t('.year') %>
        <div id="year-slider">
          <%= f.hidden_field :year_min, :value => filter.year_min || 0 %>
          <%= f.hidden_field :year_max, :value => filter.year_max || 2020 %>
          <ul id="year_labels">
            <% ['-', '40', '50', '60', '70', '80', '90', '00', '+'].collect do |year| %>
              <li><%= year %></li>
            <% end %>
          </ul>
          <div id="year-slider-range"></div>
        </div>
      </li>
      <li class="ratings<%= ' open' if filter.rating? %>">
        <%= link_to t('.ratings') %>
        <div id="ratings-slider">
          <%= f.hidden_field :rating_min, :value => filter.rating_min || 0 %>
          <%= f.hidden_field :rating_max, :value => filter.rating_max || 5 %>
          <ul id="ratings_labels">
            <% ['0', '1', '2', '3', '4', '5'].collect do |rating| %>
              <li><%= rating %></li>
            <% end %>
          </ul>
        </div>
        <div id="ratings-slider-range"></div>
      </li>
      <li class="dvdpost_choice<%= ' open' if filter.dvdpost_choice? %>">
        <%= link_to t('.dvdpost_choice') %>
        <div>
          <label>
            <%= f.check_box :dvdpost_choice %>
            <%= t '.dvdpost_choice' %>
          </label>
        </div>
      </li>
      <li class="audio<%= ' open' if filter.audio? %>">
        <%= link_to t('.audio') %>
        <div>
          <% Language.by_language(I18n.locale).each do |track| %>
            <label>
              <%= filter_checkbox_tag :audio, track.to_param, (filter.audio? && filter.audio.include?(track.to_param.to_i)) %>
              <%= track.name %>
            </label>
          <% end %>
        </div>
      </li>
      <li class="subtitles<%= ' open' if filter.subtitles? %>">
        <%= link_to t('.subtitles') %>
        <div>
          <% Subtitle.by_language(I18n.locale).each do |sub| %>
            <label>
              <%= filter_checkbox_tag :subtitles, sub.to_param, (filter.subtitles? && filter.subtitles.include?(sub.to_param.to_i)) %>
              <%= truncate sub.name, :length => 25  %>
            </label>
          <% end %>
        </div>
      </li>
      <li class='li_submit'>
        <%= f.submit t('.apply'), :name => nil, :class => 'submit' %>
      </li>
    </ul>
  </fieldset>
</div>
