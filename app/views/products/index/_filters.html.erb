<div id="filters">
  <h3>AFFINER MA RECHERCHE</h3>
  <% path = params[:category_id] && !params[:category_id].empty? ? category_products_path(:category_id => params[:category_id]) : products_path %>
  <% form_tag path, :method => :get do %>
    <% field_set_tag do %>
    <ul>
      <li class="technology open">
        <%= link_to 'Technologie' %>
        <div>
          <label>
            <%= filter_checkbox_tag :media, :dvd %>
            DVD
          </label>
          <label>
            <%= filter_checkbox_tag :media, :bluray %>
            Blu-ray
          </label>
        </div>
      </li>
      <li class="public open">
        <%= link_to 'Public' %>
        <div id="public-slider">
          <%= hidden_field_tag :public_min, (params[:public_min] || 0) %>
          <%= hidden_field_tag :public_max, (params[:public_max] || 18) %>
          <ul id="public_labels">
            <% ['ALL', '-10', '-12', '-16', '-18'].collect do |p| %>
              <li><%= p %></li>
            <% end %>
          </ul>
          <div id="public-slider-range"></div>
        </div>
      </li>
      <li class="country open">
        <%= link_to 'Pays' %>
        <div>
          <%= select_tag :country, options_for_select(countries.collect{|country| [country.name, country.to_param]}.insert(0, ['Any', 0]), :selected => params[:country]) %>
        </div>
      </li>
      <li class="year open">
        <%= link_to 'AnnÃ©e' %>
        <div id="year-slider">
          <%= hidden_field_tag :year_min, (params[:year_min] || 0) %>
          <%= hidden_field_tag :year_max, (params[:year_max] || 2010) %>
          <ul id="year_labels">
            <% ['-', '40', '50', '60', '70', '80', '90', '00', '+'].collect do |year| %>
              <li><%= year %></li>
            <% end %>
          </ul>
          <div id="year-slider-range"></div>
        </div>
      </li>
      <%= hidden_field_tag :recommended, true if params[:recommended] %>
    </ul>
    <% end %>
    <%= submit_tag 'Apply', :name => nil %>
  <% end %>
</div>
